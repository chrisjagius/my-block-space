(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{110:function(e,t,a){e.exports=a.p+"static/media/standard-wallpaper.4bbd745f.jpg"},111:function(e,t,a){"use strict";a.d(t,"a",function(){return p});var n=a(16),s=a(17),r=a(19),c=a(18),o=a(20),i=a(0),l=a.n(i),u=a(593),m=a(591),d=a(572),p=function(e){function t(){return Object(n.a)(this,t),Object(r.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(o.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.person,a=e.username;return l.a.createElement(u.a,null,l.a.createElement(m.a,null,l.a.createElement(d.a,{xs:12,md:3,className:"myprofile-bio-wrap"},l.a.createElement("div",{className:"myprofile-bio"},l.a.createElement("div",{className:"bio-left"},l.a.createElement("img",{src:t.avatarUrl()?t.avatarUrl():"https://s3.amazonaws.com/onename/avatar-placeholder.png",className:"avatar",alt:"Avatar"})),l.a.createElement("span",{className:"heading-name"},t.name()?t.name():"Nameless Person"),l.a.createElement("br",null),l.a.createElement("span",{className:"display-username text-secondary"},a)))))}}]),t}(i.Component)},170:function(e,t,a){e.exports=a.p+"static/media/free-speech-icon.417703c9.svg"},171:function(e,t,a){e.exports=a.p+"static/media/privacy-icon.bb33b0ed.svg"},172:function(e,t,a){e.exports=a.p+"static/media/tracking-icon.2f9daf47.svg"},266:function(e,t,a){"use strict";(function(e){a.d(t,"a",function(){return D});var n=a(16),s=a(17),r=a(19),c=a(18),o=a(20),i=a(27),l=a(0),u=a.n(l),m=a(11),d=a(591),p=a(572),h=a(86),f=a(594),g=a(120),E=a(595),v=a(575),b=a(110),y=a.n(b),O=a(267),j=a.n(O),w=a(268),N=a.n(w),S=a(269),k=a.n(S),x=a(67),F=a(68),I=a(111),C=a(69),D=function(t){function a(t){var s;return Object(n.a)(this,a),(s=Object(r.a)(this,Object(c.a)(a).call(this,t))).isLocal=function(){return s.props.match.params.username===Object(m.loadUserData)().username},s.captureFile=function(t){t.preventDefault();var a=t.target.files[0],n=new window.FileReader;n.readAsArrayBuffer(a),n.onloadend=function(){s.setState({newImage:"data:image/jpeg;base64,".concat(e(n.result).toString("base64"))})}},s.captureFileBackground=function(t){t.preventDefault();var a=t.target.files[0],n=new window.FileReader;n.readAsArrayBuffer(a),n.onloadend=function(){s.setState({settings:{backgroundImage:"data:image/jpeg;base64,".concat(e(n.result).toString("base64"))}})}},s.defaultBackground=function(e){e.preventDefault(),s.setState({settings:{backgroundImage:!1}})},s.deleteImage=function(){s.setState({newImage:!1})},s.logUserInfo=function(){console.log(Object(m.loadUserData)())},s.toggleSettings=function(){s.setState({changeInfo:!s.state.changeInfo})},s.saveSettings=function(){var e=s.state.settings;Object(m.putFile)("settings.json",JSON.stringify(e),{encrypt:!1}).then(function(){s.setState({changeInfo:!1})})},s.displayFriends=function(){s.setState({displayFriends:!s.state.displayFriends})},s.state={checked:!1,newStatus:"",isLoading:!1,changeInfo:!1,newImage:!1,settings:{backgroundImage:!1,image:!1,bio:!1,displayName:!1},displayFriends:!1,posts:{},postIds:[]},s.handleNewStatusChange=s.handleNewStatusChange.bind(Object(i.a)(Object(i.a)(s))),s.handleNewStatusSubmit=s.handleNewStatusSubmit.bind(Object(i.a)(Object(i.a)(s))),s.saveNewStatus=s.saveNewStatus.bind(Object(i.a)(Object(i.a)(s))),s.fetchData=s.fetchData.bind(Object(i.a)(Object(i.a)(s))),s}return Object(o.a)(a,t),Object(s.a)(a,[{key:"fetchData",value:function(){var e=this;this.setState({isLoading:!0});var t={decrypt:!1};Object(m.getFile)("postids.json",t).then(function(a){var n=JSON.parse(a||"[]"),s={};n.length>0&&n.forEach(function(a,r){Object(m.getFile)("post".concat(a,".json"),t).then(function(t){var c=JSON.parse(t);s[a]=u.a.createElement(x.a,{person:e.props.person,username:e.props.username,status:c,key:c.created_at}),setTimeout(function(){r===n.length-1&&e.setState({postIds:n,posts:s,isLoading:!1})},300)})})}).catch(function(){console.log("oepsie, could not fetch data")}).finally(function(){e.setState({isLoading:!1})}),Object(m.getFile)("settings.json",t).then(function(t){var a=JSON.parse(t||!1);e.setState({settings:a||e.state.settings})})}},{key:"saveNewStatus",value:function(){var e=this,t=this.state.postIds,a=this.state.posts,n=this.state.newStatus.trim();if(0===n.length)return!1;var s=Date.now(),r=t.length,c={id:r++,text:n,created_at:s,image:this.state.newImage};t.unshift(s);var o={encrypt:!1};Object(m.putFile)("post".concat(s,".json"),JSON.stringify(c),o).then(function(){Object(m.putFile)("postids.json",JSON.stringify(t),o).then(function(){e.setState({postIds:t,posts:a}),e.fetchData()}).catch(function(){console.log("something went wrong with saving your post id")})}).catch(function(){console.log("something went wrong with saving your post")})}},{key:"handleNewStatusChange",value:function(e){this.setState({newStatus:e.target.value})}},{key:"handleNewStatusSubmit",value:function(e){this.saveNewStatus(),this.setState({newStatus:"",newImage:!1})}},{key:"componentDidMount",value:function(){this.fetchData()}},{key:"render",value:function(){var e=this,t=this.props,a=t.person,n=t.username,s={backgroundImage:'url("'.concat(this.state.settings.backgroundImage?this.state.settings.backgroundImage:y.a,'"')},r=u.a.createElement("div",{className:"new-status settings"},u.a.createElement(d.a,null,u.a.createElement(p.a,{md:12},u.a.createElement(h.a,null,u.a.createElement(h.a.Group,{as:d.a,controlId:"formPlaintextEmail"},u.a.createElement(h.a.Label,{column:!0,sm:"12"},"To change the display name, image and bio press ",u.a.createElement("a",{target:"_blank",href:"https://browser.blockstack.org/profiles",rel:"noopener noreferrer"},"here"),".")),u.a.createElement(h.a.Group,{as:d.a,controlId:"formPlaintextPassword"},u.a.createElement(h.a.Label,{column:!0,sm:"3"},"Background image"),u.a.createElement(p.a,{sm:"9"},u.a.createElement("label",{className:"btn btn-outline-success"},"Upload ",u.a.createElement("input",{type:"file",onChange:this.captureFileBackground,hidden:!0})),"     ",u.a.createElement("label",{className:"btn btn-outline-danger",onClick:this.defaultBackground},"Default"))),u.a.createElement("hr",null),u.a.createElement(f.a,{variant:"success",onClick:this.saveSettings},"Save"))))),c=this.props.friends.length>0?u.a.createElement("div",{className:"profile-posts"},u.a.createElement("div",{className:"my-post"},u.a.createElement("h1",null,"Friends"),u.a.createElement(g.a,{variant:"flush"},this.props.friends.map(function(t){return u.a.createElement("div",{className:"my-friend",key:t},u.a.createElement(d.a,null,u.a.createElement(p.a,{xs:12},u.a.createElement(g.a.Item,{onClick:function(){e.props.searchFor(t)}},t))))})))):u.a.createElement("div",{className:"profile-posts"},u.a.createElement("div",{className:"my-post"},u.a.createElement("h1",null,"Friends"),u.a.createElement(g.a,{variant:"flush"},u.a.createElement(d.a,null,u.a.createElement(p.a,{xs:12},u.a.createElement(g.a.Item,null,"You don't have any friends yet."))))));return u.a.createElement("div",null,a&&u.a.createElement("div",{className:"container-myprofile"},u.a.createElement("div",{className:"container-desc-prof"},u.a.createElement("div",{style:s,className:"background-image"}),u.a.createElement(I.a,{person:a,username:n}),u.a.createElement("div",{className:"myprofile-options"},u.a.createElement(d.a,{className:"my-options"},u.a.createElement(p.a,{xs:3}),u.a.createElement(p.a,{xs:1},u.a.createElement("img",{src:j.a,onClick:this.toggleSettings,alt:"",className:"bio-icons"})),u.a.createElement(p.a,{xs:8},u.a.createElement("img",{src:k.a,onClick:this.displayFriends,alt:"",className:"bio-icons"}))),u.a.createElement(d.a,null,u.a.createElement(p.a,{md:3}),u.a.createElement(p.a,{xs:12,md:8},u.a.createElement("hr",null)," "),u.a.createElement(p.a,{md:1})),u.a.createElement(d.a,null,u.a.createElement(p.a,{xs:12},u.a.createElement("p",{className:"text-secondary"},a.description()?a.description():"You have no bio."))))),this.state.displayFriends&&c,!this.state.displayFriends&&u.a.createElement("div",{className:"profile-posts"},u.a.createElement(d.a,null,u.a.createElement(p.a,{xs:1,md:1,xl:2}),u.a.createElement(p.a,{sm:12,md:10,xl:8},this.isLocal()&&u.a.createElement("div",null,this.state.changeInfo&&r,u.a.createElement("div",{className:"new-status"},u.a.createElement(d.a,null,u.a.createElement(p.a,{md:12},this.state.newImage&&u.a.createElement("div",{className:"post-pic-container"},u.a.createElement(f.a,{onClick:this.deleteImage,variant:"outline-danger",className:"delete-img"},"X"),u.a.createElement("img",{alt:"",className:"post-pic",als:"",src:this.state.newImage})),u.a.createElement(E.a,null,u.a.createElement(v.a,{as:"textarea",className:"input-status",value:this.state.newStatus,onChange:function(t){return e.handleNewStatusChange(t)},placeholder:"What's on your mind?"})))),u.a.createElement(d.a,null,u.a.createElement(p.a,{xs:2,className:"input-btn-wrapper"},u.a.createElement("label",{className:"btn btn-outline-secondary"},u.a.createElement("img",{alt:"",src:N.a})," ",u.a.createElement("input",{type:"file",onChange:this.captureFile,hidden:!0}))),u.a.createElement(p.a,{xs:8}),u.a.createElement(p.a,{xs:2,className:" input-btn-wrapper"},u.a.createElement(f.a,{variant:"outline-success",className:"",onClick:function(t){return e.handleNewStatusSubmit(t)}},"POST")))))),u.a.createElement(p.a,{xs:1,md:1})),u.a.createElement(d.a,null,u.a.createElement(p.a,{xs:1,md:1,xl:2}),u.a.createElement(p.a,{sm:12,md:10,xl:8},this.state.isLoading&&u.a.createElement(F.a,null),!this.state.isLoading&&u.a.createElement(C.a,{array:!1,order:this.state.postIds,allPosts:this.state.posts})),u.a.createElement(p.a,{xs:1,md:1})))))}}]),a}(l.Component)}).call(this,a(2).Buffer)},267:function(e,t,a){e.exports=a.p+"static/media/settings.674d9d35.svg"},268:function(e,t,a){e.exports=a.p+"static/media/camera.8b7b6457.svg"},269:function(e,t,a){e.exports=a.p+"static/media/users.937fec69.svg"},272:function(e,t,a){e.exports=a.p+"static/media/2.1c89fea0.png"},273:function(e,t,a){e.exports=a.p+"static/media/3.c14b3b5d.png"},276:function(e,t,a){e.exports=a(590)},281:function(e,t,a){},295:function(e,t){},296:function(e,t){},317:function(e,t){},319:function(e,t){},524:function(e,t){},587:function(e,t,a){},590:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),r=a(168),c=a.n(r),o=(a(281),a(71)),i=a.n(o),l=a(109),u=a(16),m=a(17),d=a(19),p=a(18),h=a(20),f=a(266),g=a(594),E=a(593),v=a(591),b=a(572),y=a(272),O=a.n(y),j=a(170),w=a.n(j),N=a(171),S=a.n(N),k=a(172),x=a.n(k),F=function(e){function t(){return Object(u.a)(this,t),Object(d.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this.props.handleSignIn;return s.a.createElement("div",{className:"panel-landing"},s.a.createElement("div",{className:"landing-container"},s.a.createElement("div",{className:"landing-logo-container"},s.a.createElement("img",{className:"landing-logo",src:O.a,alt:"logo"})),s.a.createElement("h1",null,"The Decentralized Social Network")),s.a.createElement("div",{className:"landing-square-container"},s.a.createElement("div",{className:"square-container"},s.a.createElement("div",{className:"landing-square-text"},s.a.createElement(g.a,{className:"signin-button",onClick:e.bind(this)},"Sign In with Blockstack")),s.a.createElement("div",{className:"landing-square"}))),s.a.createElement("div",{className:"card-container-back"},s.a.createElement(E.a,{className:"card-container"},s.a.createElement(v.a,null,s.a.createElement(b.a,{md:12,lg:4},s.a.createElement("div",{className:"flip-card"},s.a.createElement("div",{className:"flip-card-inner"},s.a.createElement("div",{className:"flip-card-front"},s.a.createElement("img",{src:w.a,alt:"free speech icon"}),s.a.createElement("span",null,"Free Speech")),s.a.createElement("div",{className:"flip-card-back"},s.a.createElement("img",{src:w.a,alt:"free speech icon"}),s.a.createElement("hr",null),s.a.createElement("p",null,"Take a stand against government surveillance or companies using your social media data without your consent. You decide what you share and with who you share it."))))),s.a.createElement(b.a,{md:12,lg:4},s.a.createElement("div",{className:"flip-card"},s.a.createElement("div",{className:"flip-card-inner"},s.a.createElement("div",{className:"flip-card-front"},s.a.createElement("img",{src:S.a,alt:"privacy-icon"}),s.a.createElement("span",null,"You own your data")),s.a.createElement("div",{className:"flip-card-back"},s.a.createElement("img",{src:S.a,alt:"privacy-icon"}),s.a.createElement("hr",null),s.a.createElement("p",null,"We use Blockstack\u2019s decentralized identity and storage system, giving you total ownership of your data. You control who can access your data, not us."))))),s.a.createElement(b.a,{md:12,lg:4},s.a.createElement("div",{className:"flip-card"},s.a.createElement("div",{className:"flip-card-inner"},s.a.createElement("div",{className:"flip-card-front"},s.a.createElement("img",{src:x.a,alt:"no tracking icon"}),s.a.createElement("span",null,"No tracking")),s.a.createElement("div",{className:"flip-card-back"},s.a.createElement("img",{src:x.a,alt:"no tracking icon"}),s.a.createElement("hr",null),s.a.createElement("p",null,"My Block Space is an open source project created by the community for the community. The goal is to make an easy to use social platform for free where the user is ",s.a.createElement("strong",null,"not")," the product.")))))))))}}]),t}(n.Component),I=a(596),C=a(597),D=a(595),P=a(575),L=a(11),U=a(592),M=a(273),J=a.n(M),B=function(e){function t(){var e;return Object(u.a)(this,t),(e=Object(d.a)(this,Object(p.a)(t).call(this))).handleSignOut=function(e){e.preventDefault(),Object(L.signUserOut)(window.location.origin)},e.handleKeyPress=function(t){t.preventDefault();var a=e.state.searchUser.trim();e.props.searchFor(a)},e.handleChange=function(t){t.preventDefault(),e.setState({searchUser:t.target.value})},e.state={searchUser:void 0},e}return Object(h.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.person,n=t.username;return s.a.createElement("div",null,s.a.createElement(I.a,{bg:"light",collapseOnSelect:!0,fixed:"top",expand:"sm",className:"navbar-con"},s.a.createElement(I.a.Brand,null,s.a.createElement(U.a,{className:"nav-home-link",to:"/feed"},s.a.createElement("img",{src:J.a,width:"30",height:"30",className:"d-inline-block align-top logo-nav",alt:"MY BLOCK SPACE"}))),s.a.createElement(I.a.Toggle,{"aria-controls":"basic-navbar-nav"}),s.a.createElement(I.a.Collapse,{id:"basic-navbar-nav"},s.a.createElement(C.a,{className:"mr-auto"},s.a.createElement(D.a,{size:"sm"},s.a.createElement(P.a,{type:"text",placeholder:"Search for friends",onChange:function(t){return e.handleChange(t)}}),s.a.createElement(D.a.Append,null,s.a.createElement(g.a,{variant:"outline-secondary",onClick:function(t){return e.handleKeyPress(t)}},"Search")))),s.a.createElement(C.a,{className:'justify-content-end"'},s.a.createElement(C.a.Link,{onClick:this.handleSignOut},"Sign-Out"),s.a.createElement(U.a,{to:"/".concat(n||null)},s.a.createElement("img",{src:a.avatarUrl()?a.avatarUrl():"https://s3.amazonaws.com/onename/avatar-placeholder.png",alt:"",className:"nav-img"}))))))}}]),t}(n.Component),T=a(27),A=a(110),W=a.n(A),_=function(e){function t(){return Object(u.a)(this,t),Object(d.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{className:"no-res-container"},s.a.createElement("p",null,"Oopsie... ",s.a.createElement("br",null)," We can't find the blockstack id ",s.a.createElement("big",null,'"',this.props.username,'"'),"."))}}]),t}(n.Component),z=a(67),Y=a(68),R=a(111),q=function e(t){if(1===t.length||0===t.length)return t;var a=t.length,n=Math.floor(a/2),s=t.slice(0,n),r=t.slice(n);return K(e(s),e(r))},K=function(e,t){for(var a=[],n=0,s=0;n<e.length&&s<t.length;)e[n]>t[s]?(a.push(e[n]),n++):(a.push(t[s]),s++);return a.concat(e.slice(n)).concat(t.slice(s))},G=a(69),X=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).isLocal=function(){return a.props.match.params.username===Object(L.loadUserData)().username},a.addFriend=function(e){e.preventDefault();var t=a.props.friends;t.push(a.state.username);Object(L.putFile)("friends.json",JSON.stringify(t),{encrypt:!1}).then(function(e){console.log("res ,",e),a.setState({following:!0})}),a.setState({following:!0})},a.unFriend=function(e){e.preventDefault();var t=a.props.friends,n=a.state.username;t=t.filter(function(e){return e!==n}),a.props.updateFriends(t);Object(L.putFile)("friends.json",JSON.stringify(t),{encrypt:!1}).then(function(e){console.log("res ,",e),a.setState({following:!1})})},a.logUserInfo=function(){console.log(Object(L.loadUserData)())},a.state={person:void 0,username:"",checked:!1,statuses:[],statusIndex:0,isLoading:!0,following:!1,postIds:[],posts:[]},a.fetchData=a.fetchData.bind(Object(T.a)(Object(T.a)(a))),a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"fetchData",value:function(){var e=this,t=this.props.match.params.username.indexOf(".id.blockstack")>-1?this.props.match.params.username:this.props.match.params.username+".id.blockstack";this.setState({isLoading:!0,username:t}),this.setState({}),Object(L.lookupProfile)(t).then(function(t){e.setState({person:new L.Person(t)})}).catch(function(t){e.setState({person:!1})});var a={username:t,decrypt:!1};Object(L.getFile)("statuses.json",a).then(function(t){var a=JSON.parse(t||"[]");e.setState({statusIndex:a.length,statuses:a})}).catch(function(t){e.setState({person:void 0})}),Object(L.getFile)("postids.json",a).then(function(n){var r=JSON.parse(n||"[]"),c={};r.length>0&&r.forEach(function(n,o){Object(L.getFile)("post".concat(n,".json"),a).then(function(a){var i=JSON.parse(a);c[n]=s.a.createElement(z.a,{person:e.state.person,username:t,status:i,key:i.created_at}),setTimeout(function(){o===r.length-1&&e.setState({postIds:r,posts:c,isLoading:!1})},300)})})}).catch(function(){console.log("oepsie, could not fetch data")}).finally(function(){e.setState({isLoading:!1})}),this.props.friends.includes(t)?this.setState({following:!0}):this.setState({following:!1})}},{key:"componentDidMount",value:function(){this.fetchData()}},{key:"componentWillReceiveProps",value:function(){this.fetchData()}},{key:"render",value:function(){var e=this.state,t=e.person,a=e.username,n=e.isLoading,r={backgroundImage:'url("'.concat(W.a,'"')};return s.a.createElement("div",null,n&&s.a.createElement(Y.a,null),!n&&t?s.a.createElement("div",{className:"container-myprofile"},s.a.createElement("div",{style:r,className:"container-desc-prof"},s.a.createElement(R.a,{person:t,username:a}),s.a.createElement("div",{className:"myprofile-options"},s.a.createElement(v.a,{className:"my-options"},s.a.createElement(b.a,{xs:3}),s.a.createElement(b.a,{xs:2},s.a.createElement("p",{className:"text-secondary"},"Posts: ",this.state.postIds.length)),s.a.createElement(b.a,{xs:2},this.state.following?s.a.createElement(g.a,{variant:"outline-danger",className:"",onClick:this.unFriend},"Unfollow"):s.a.createElement(g.a,{variant:"outline-success",className:"",onClick:this.addFriend},"Follow")),s.a.createElement(b.a,{xs:5})),s.a.createElement(v.a,null,s.a.createElement(b.a,{md:3}),s.a.createElement(b.a,{xs:12,md:8},s.a.createElement("hr",null)," "),s.a.createElement(b.a,{md:1})),s.a.createElement(v.a,null,s.a.createElement(b.a,{xs:12},s.a.createElement("p",{className:"text-secondary"},t.description()?t.description():"You have no bio."))))),s.a.createElement("div",{className:"profile-posts"},s.a.createElement(v.a,null,s.a.createElement(b.a,{xs:1,md:1,xl:2}),s.a.createElement(b.a,{sm:12,md:10,xl:8},this.state.isLoading&&s.a.createElement("span",null,"Loading..."),!this.state.isLoading&&s.a.createElement(G.a,{array:!1,order:this.state.postIds,allPosts:this.state.posts})),s.a.createElement(b.a,{xs:1,md:1})))):s.a.createElement(_,{username:a}))}}]),t}(n.Component),$=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).fetchPostsFromFriends=function(){a.setState({isLoading:!0});var e=a.props.friends,t={},n=[];e.forEach(function(){var r=Object(l.a)(i.a.mark(function r(c,o){var l,u;return i.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Object(L.lookupProfile)(c).then(function(e){return new L.Person(e)}).catch(function(e){console.log("could not resolve profile")});case 2:l=r.sent,u={username:c,decrypt:!1},Object(L.getFile)("postids.json",u).then(function(e){var a=JSON.parse(e||"[]");a.length>0&&a.forEach(function(e,a){Object(L.getFile)("post".concat(e,".json"),u).then(function(a){var r=JSON.parse(a);n.push(e),t[e]=s.a.createElement(z.a,{person:l,username:c,status:r,key:r.created_at})})})}).catch(function(e){console.log("fail")}).finally(function(){setTimeout(function(){o===e.length-1&&a.setState({allPosts:t,order:q(n),isLoading:!1,noPosts:0===t.length})},1e3)});case 5:case"end":return r.stop()}},r,this)}));return function(e,t){return r.apply(this,arguments)}}())},a.state={allPosts:[],isLoading:!1,order:[],noPosts:!1},a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){this.fetchPostsFromFriends()}},{key:"render",value:function(){return s.a.createElement("div",{className:"feed-container"},s.a.createElement(v.a,null,s.a.createElement(b.a,{md:1,xl:2}),s.a.createElement(b.a,{sm:12,md:10,xl:8},this.state.isLoading&&s.a.createElement(Y.a,null),this.state.noPosts&&!this.state.isLoading&&s.a.createElement("h1",null,"Oepsie, you have no posts in your timeline yet"),!this.state.noPosts&&!this.state.isLoading&&s.a.createElement(G.a,{array:!1,order:this.state.order,allPosts:this.state.allPosts})),s.a.createElement(b.a,{md:1,xl:2})))}}]),t}(n.Component),H=a(600),Q=a(599),V=(a(587),"https://s3.amazonaws.com/onename/avatar-placeholder.png"),Z=function(e){function t(e){var a;Object(u.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).checkSignedInStatus=function(){return!!Object(L.isUserSignedIn)()||(Object(L.isSignInPending)()?(Object(L.handlePendingSignIn)().then(function(e){this.props.history.push("/")}),!1):void 0)},a.loadPerson=Object(l.a)(i.a.mark(function e(){var t,n,s;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=Object(L.loadUserData)(),e.next=3,new L.Person(t.profile);case 3:return n=e.sent,a.loadFriends(),e.next=7,t.username;case 7:s=e.sent,a.setState({person:n,username:s}),a.props.history.push("/".concat(s));case 10:case"end":return e.stop()}},e,this)})),a.loadFriends=function(){Object(L.getFile)("friends.json",{decrypt:!1}).then(function(e){var t=JSON.parse(e||"[]");t.push(a.state.username),a.setState({friends:t})})},a.handleSignIn=function(e){e.preventDefault();var t=window.location.origin;Object(L.redirectToSignIn)(t,t+"/manifest.json",["store_write","publish_data"])},a.searchFor=function(e){a.props.history.push("/users/".concat(e))},a.updateFriends=function(e){a.setState({friends:e})};var n=a.checkSignedInStatus();return a.state={isSignedIn:n,person:{name:function(){return"Anonymous"},avatarUrl:function(){return V},description:function(){return"No description"}},username:null,friends:[]},n&&a.loadPerson(),a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"componentWillMount",value:function(){Object(L.isSignInPending)()&&Object(L.handlePendingSignIn)().then(function(e){window.location=window.location.origin})}},{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"App"},this.state.isSignedIn?s.a.createElement("div",null,s.a.createElement(B,{searchFor:this.searchFor,person:this.state.person,username:this.state.username}),s.a.createElement(H.a,null,s.a.createElement(Q.a,{path:"/users/:username",render:function(t){return s.a.createElement(X,Object.assign({updateFriends:e.updateFriends,friends:e.state.friends,person:e.state.person,username:e.state.username},t))}}),s.a.createElement(Q.a,{exact:!0,path:"/feed",render:function(t){return s.a.createElement($,Object.assign({searchFor:e.searchFor,friends:e.state.friends,person:e.state.person,username:e.state.username},t))}}),s.a.createElement(Q.a,{path:"/:username",render:function(t){return s.a.createElement(f.a,Object.assign({searchFor:e.searchFor,friends:e.state.friends,person:e.state.person,username:e.state.username},t))}}),s.a.createElement(Q.a,{exact:!0,path:"/",render:function(t){return s.a.createElement($,Object.assign({searchFor:e.searchFor,friends:e.state.friends,person:e.state.person,username:e.state.username},t))}}))):s.a.createElement(F,{handleSignIn:this.handleSignIn}))}}]),t}(n.Component),ee=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function te(e){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}}).catch(function(e){console.error("Error during service worker registration:",e)})}var ae=a(598);c.a.render(s.a.createElement(ae.a,null,s.a.createElement(Q.a,{path:"/",render:function(e){return s.a.createElement(Z,e)}})),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("",window.location).origin!==window.location.origin)return;window.addEventListener("load",function(){var e="".concat("","/service-worker.js");ee?function(e){fetch(e).then(function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):te(e)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(e):te(e)})}}()},67:function(e,t,a){"use strict";a.d(t,"a",function(){return p});var n=a(16),s=a(17),r=a(19),c=a(18),o=a(20),i=a(0),l=a.n(i),u=a(591),m=a(572),d=a(592),p=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(r.a)(this,Object(c.a)(t).call(this,e))).parseDate=function(e){var t=a.state.now;return Math.floor((t-e)/6e4)<60?"".concat(Math.floor((t-e)/6e4)," m"):Math.floor((t-e)/36e5)<24?"".concat(Math.floor((t-e)/36e5)," h"):Math.floor((t-e)/864e5)<7?"".concat(Math.floor((t-e)/864e5)," d"):Math.floor((t-e)/864e5)<365?"".concat(Math.floor(Math.floor((t-e)/864e5)/7)," w"):void 0},a.showFulltext=function(){a.setState({fullText:!a.state.fullText})},a.state={now:Date.now(),fullText:!1},a}return Object(o.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this.props,t=e.person,a=e.username,n=e.status;return l.a.createElement("div",{className:"my-post"},l.a.createElement(u.a,{className:"poster-info-con"},l.a.createElement(m.a,{xs:2},l.a.createElement(d.a,{className:"post-link",to:"/users/".concat(a)},l.a.createElement("img",{src:t.avatarUrl()?t.avatarUrl():"https://s3.amazonaws.com/onename/avatar-placeholder.png",alt:"",className:"post-img"}))),l.a.createElement(m.a,{xs:3,className:"poster-info"},l.a.createElement(d.a,{className:"post-link",to:"/users/".concat(a)},a)),l.a.createElement(m.a,{xs:4}),l.a.createElement(m.a,{xs:3},l.a.createElement("span",{className:"post-date"},"".concat(this.parseDate(n.created_at)," ago")))),l.a.createElement("hr",null),n.image&&l.a.createElement("div",{className:"post-pic-container"},l.a.createElement("img",{alt:"",className:"post-pic",src:n.image}),l.a.createElement("hr",null)),!this.state.fullText&&(n.text.length>500?l.a.createElement("pre",null,n.text.substring(0,500),"...",l.a.createElement("br",null),l.a.createElement("strong",{className:"show-more",onClick:this.showFulltext},"show more")):l.a.createElement("pre",null,n.text)),this.state.fullText&&l.a.createElement("pre",null,n.text," ",l.a.createElement("br",null),l.a.createElement("strong",{className:"show-more",onClick:this.showFulltext},"show less")))}}]),t}(i.Component)},68:function(e,t,a){"use strict";a.d(t,"a",function(){return u});var n=a(16),s=a(17),r=a(19),c=a(18),o=a(20),i=a(0),l=a.n(i),u=function(e){function t(){return Object(n.a)(this,t),Object(r.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(o.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return l.a.createElement("div",{className:"container-myprofile"},l.a.createElement("div",{className:"loader"}))}}]),t}(i.Component)},69:function(e,t,a){"use strict";a.d(t,"a",function(){return u});var n=a(16),s=a(17),r=a(19),c=a(18),o=a(20),i=a(0),l=a.n(i),u=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(r.a)(this,Object(c.a)(t).call(this,e))).addFromArray=function(){},a.addFromObject=function(){},a.state={},a}return Object(o.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){}},{key:"componentWillReceiveProps",value:function(){}},{key:"render",value:function(){var e=this;return l.a.createElement("div",{className:"infinite-list"},this.props.order.map(function(t){return e.props.allPosts[t]}))}}]),t}(i.Component)}},[[276,2,1]]]);
//# sourceMappingURL=main.49309d7a.chunk.js.map